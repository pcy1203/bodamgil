<div class="menu-back">
</div>
<div class="menu-container">
<div class="header {% if user %}header-login{% endif %}">
	<a href="/"><img src="../../photo/main/home.png" class="home"></a>
	<button class="exit-btn"><img src="../../photo/main/exit.png" class="exit"></button>
	{% if user %}
		<img src="../../photo/main/profile.png" class="profile">
		<span class="name">{{ user.name }}</span>
		<a href="/myprofile" class="mypage">마이페이지</a>
		<p class="intro">{{ user.introduction }}</p>
	{% endif %}
</div> 
<nav>
	<ul class="nav">
	  <li class="menu-1"><a href="/about">소개</a></li>
	  <li class="menu-2"><a href="/myself">나 알아보기</a>
	  <img src="../../photo/main/right.png" class="right1 menu-2-close"
		   style="top: {% if user %}282px{% else %}154px{% endif %}">
		<ul>
			<li class="submenu"><a href="#">진로게임</a></li>
			<li class="submenu"><a href="/myprofile">마이페이지</a></li>
		</ul>
	  </li>
	  <li class="menu-3"><a href="#">세상 알아보기</a>
	  <img src="../../photo/main/right.png" class="right2 menu-3-close"
		   style="top: {% if user %}338px{% else %}210px{% endif %}">
		<ul>
		  <li class="submenu"><a href="#">직무 알아보기</a></li>
		  <li class="submenu"><a href="#">직업 탐구하기</a></li>
		  <li class="submenu"><a href="#">진로 검사 실시하기</a></li>
		  <li class="submenu"><a href="#">도움이 되는 사이트</a></li>
		</ul>
	  </li>
	  <li class="menu-4"><a href="#">이용안내</a></li>
	  {% if user %}
		<li class="menu-5"><a href="#">회원정보수정</a></li>
	  {% endif %}
	</ul>
  </nav>
  <div class="button">
	{% if user %}
	  <a href="/auth/logout" class="logout menu-button" style="top: 509px">로그아웃</a>
	{% else %}
	  <a href="/login" class="login menu-button" style="top: 334px">로그인</a>
	  <a href="/signup" class="signup menu-button" style="top: 394px">회원가입</a>
	{% endif %}
  </div>
</div>
<script>
const menuBlock = document.querySelector('.menu-container');
menuBlock.style.height = `${document.documentElement.scrollHeight}px`;
const menuBack = document.querySelector('.menu-back');
menuBack.style.height = `${document.documentElement.scrollHeight}px`;

document.querySelector('.menu-btn').addEventListener('click', () => {
menuBack.style.display = 'block';
menuBlock.style.display = 'block';
});

document.querySelector('.menu-container .exit-btn').addEventListener('click', () => {
menuBack.style.display = 'none';
menuBlock.style.display = 'none';
});

const menu2Arrow = document.querySelector('.menu-2-close');
const menu3Arrow = document.querySelector('.menu-3-close');
const menuButtons = document.querySelectorAll('.menu-button');

document.querySelector('.menu-2').addEventListener('click', () => {
if (menu2Arrow.classList[1] === 'menu-2-close') {
  document.querySelectorAll('.menu-2 li.submenu').forEach((submenu) => {
	submenu.style.display = 'block';
  })
  menu2Arrow.style.transform = 'rotate(270deg)';
  menu3Arrow.style.top = `${Number(menu3Arrow.style.top.slice(0, -2)) + 69}px`;
  menuButtons.forEach((button) => {
	button.style.top = `${Number(button.style.top.slice(0, -2)) + 69}px`;
  });
  menu2Arrow.classList.remove('menu-2-close');
  menu2Arrow.classList.add('menu-2-open');
} else {
  document.querySelectorAll('.menu-2 li.submenu').forEach((submenu) => {
	submenu.style.display = 'none';
  })
  menu2Arrow.style.transform = 'rotate(90deg)';
  menu3Arrow.style.top = `${Number(menu3Arrow.style.top.slice(0, -2)) - 69}px`;
  menuButtons.forEach((button) => {
	button.style.top = `${Number(button.style.top.slice(0, -2)) - 69}px`;
  });
  menu2Arrow.classList.remove('menu-2-open');
  menu2Arrow.classList.add('menu-2-close');
}
});

document.querySelector('.menu-3').addEventListener('click', () => {
if (menu3Arrow.classList[1] === 'menu-3-close') {
  document.querySelectorAll('.menu-3 li.submenu').forEach((submenu) => {
	submenu.style.display = 'block';
  })
  menu3Arrow.style.transform = 'rotate(270deg)';
  menuButtons.forEach((button) => {
	button.style.top = `${Number(button.style.top.slice(0, -2)) + 137}px`;
  });
  menu3Arrow.classList.remove('menu-3-close');
  menu3Arrow.classList.add('menu-3-open');
} else {
  document.querySelectorAll('.menu-3 li.submenu').forEach((submenu) => {
	submenu.style.display = 'none';
  })
  menu3Arrow.style.transform = 'rotate(90deg)';
  menuButtons.forEach((button) => {
	button.style.top = `${Number(button.style.top.slice(0, -2)) - 137}px`;
  });
  menu3Arrow.classList.remove('menu-3-open');
  menu3Arrow.classList.add('menu-3-close');
}
});

window.addEventListener('resize', (e) => {
menuBack.style.height = `${document.documentElement.scrollHeight}px`;
menuBlock.style.height = `${document.documentElement.scrollHeight}px`;
if (window.innerWidth >= 1025) {
  menuBack.style.display = 'none';
  menuBlock.style.display = 'none';
}
});

</script>